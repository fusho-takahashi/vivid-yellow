---
import Layout from '../layouts/Layout.astro';
import { getPosts } from '../lib/microcms';
import type { Post } from '../types/blog';

const postsResponse = await getPosts();
const posts: Post[] = postsResponse.contents;
---

<Layout title="VIVID YELLOW">
	<section class="posts">
		{posts.length === 0 ? (
			<p>記事がありません。</p>
		) : (
			<div class="post-list">
				{posts.map((post) => (
					<article class="post-card">
						<h3>
							<a href={`/posts/${post.id}`}>{post.title}</a>
						</h3>
						<time datetime={post.publishedAt}>
							{new Date(post.publishedAt).toLocaleDateString('ja-JP')}
						</time>
						{post.tags && post.tags.length > 0 && (
							<div class="tags">
								{post.tags.map((tag) => (
									<a href={`/tags/${tag.id}`} class="tag">
										{tag.name}
									</a>
								))}
							</div>
						)}
					</article>
				))}
			</div>
		)}
	</section>
</Layout>
